(this["webpackJsonpmovie-review-app"]=this["webpackJsonpmovie-review-app"]||[]).push([[0],{132:function(e,t,n){e.exports=n(205)},137:function(e,t,n){},205:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(15),i=n.n(c),o=(n(137),n(56)),u=n(34),l=n(213),f=n(215),s=n(38),v=n(39);function d(){var e=Object(s.a)(["\n  height: 100%;\n  max-height: 300px;\n  padding-right: 10px;\n"]);return d=function(){return e},e}function g(){var e=Object(s.a)(["\n  width: 100%;\n  position: relative;\n  padding-bottom: 10px;\n  cursor: pointer;\n  top: 0px;\n  &:hover {\n    top: -3px;\n  }\n"]);return g=function(){return e},e}function m(){var e=Object(s.a)(["\n  padding-bottom: 20px;\n  position: relative;\n"]);return m=function(){return e},e}function p(){var e=Object(s.a)(["\n  margin-top: ","px;\n  top: 0px;\n  height: calc(100% - ","px);\n  width: 100%;\n  padding: 15px;\n  position: absolute;\n  overflow-x: auto;\n"]);return p=function(){return e},e}function h(){var e=Object(s.a)(["\n  background-color: #282c34;\n  height: ","px;\n  color: white;\n  font-size: 25px;\n"]);return h=function(){return e},e}function b(){var e=Object(s.a)(["\n  text-align: center;\n  position: relative;\n  overflow: hidden;\n"]);return b=function(){return e},e}function O(){var e=Object(s.a)(["\n  font-weight: 700;\n"]);return O=function(){return e},e}function j(){var e=Object(s.a)(["\n  padding-right: ","px;\n  padding-bottom: ","px;\n"]);return j=function(){return e},e}function E(){var e=Object(s.a)(["\n  padding-bottom: 5px;\n"]);return E=function(){return e},e}function x(){var e=Object(s.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return x=function(){return e},e}function w(){var e=Object(s.a)(["\n  display: flex;\n  flex-direction: column;\n"]);return w=function(){return e},e}function y(){var e=Object(s.a)(["\n  display: flex;\n"]);return y=function(){return e},e}function k(){var e=Object(s.a)(["\n  width: 100%;\n  height: 100%;\n"]);return k=function(){return e},e}var M=v.a.div(k()),C=v.a.div(y()),S=v.a.div(w()),_=Object(v.a)(M)(x()),A=v.a.div(E()),L=v.a.div(j(),(function(e){return e.width||10}),(function(e){return e.height||10})),F=Object(v.a)(A)(O()),D=Object(v.a)(M)(b()),V=Object(v.a)(_)(h(),50),z=Object(v.a)(M)(p(),50,50),W=Object(v.a)(S)(m()),B=v.a.img(g()),I=v.a.img(d()),N=n(111),R=n(208),H=n(128),J=n(112),P=n.n(J),T=n(68),$=n.n(T),q=n(60),G=n(76),K=n(66),Q=n(28),U=function(){var e=Object(G.a)($.a.mark((function e(){var t,n,a,r,c=arguments;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},n=t.page,a="".concat("https://api.themoviedb.org/3/movie/popular","?api_key=").concat("c06e14cd13b2c6373fdc8f9f3dd47eb3"),n&&(a+="&page=".concat(n)),e.next=6,fetch(a);case 6:if(200===(r=e.sent).status){e.next=9;break}throw new Error({message:"Fetch Data fail with status ".concat(r.status)});case 9:return e.abrupt("return",r.json());case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=Object(K.b)({name:"movieData",initialState:{data:[],loading:!1},reducers:{setMovieData:function(e,t){t.payload.forEach((function(t){return e.data[t.page-1]=t})),e.loading=!1},setLoading:function(e,t){e.loading=t.payload}}}),Y=X.actions,Z=Y.setMovieData,ee=Y.setLoading,te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var t=Object(G.a)($.a.mark((function t(n,a){var r,c,i,o,u,l,f,s;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=a(),c=r.movieData,i=e.page||1,Array.isArray(i)||(i=[i]),o=[],u=Object(q.a)(i),t.prev=5,u.s();case 7:if((l=u.n()).done){t.next=14;break}if(f=l.value,!(Number.isNaN(f)||Math.floor(f)!==f||f<1)){t.next=11;break}throw new Error("Page must be an positive interger");case 11:c.data[f-1]||o.push(f);case 12:t.next=7;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(5),u.e(t.t0);case 19:return t.prev=19,u.f(),t.finish(19);case 22:if(o.length){t.next=24;break}return t.abrupt("return");case 24:return t.prev=24,n(ee(!0)),t.next=28,Promise.all(o.map((function(e){return U({page:e})})));case 28:return s=t.sent,t.abrupt("return",n(Z(s)));case 32:t.prev=32,t.t1=t.catch(24),console.error(t.t1);case 35:case"end":return t.stop()}}),t,null,[[5,16,19,22],[24,32]])})));return function(e,n){return t.apply(this,arguments)}}()},ne=function(e){return e.movieData.data},ae=Object(Q.a)(ne,(function(e){return function e(t,n){var a,r=Object(q.a)(t);try{for(r.s();!(a=r.n()).done;){var c=a.value;Array.isArray(c)?e(c,n):n.push(c)}}catch(i){r.e(i)}finally{r.f()}return n}(e.filter((function(e){return!!e})).map((function(e){return e.results})),[])})),re=Object(Q.a)(ne,(function(e){for(var t=0;e[t++];);return t})),ce=Object(Q.a)(ne,re,(function(e,t){return!e.length||t<=e[0].total_pages})),ie=function(e){return e.movieData.loading},oe=X.reducer,ue=Object(K.b)({name:"movieFilter",initialState:{language:{},voting:{min:0,max:10,selectMin:0,selectMax:10},adult:!1,search:""},reducers:{setLanguage:function(e,t){e.language[t.payload]?delete e.language[t.payload]:e.language[t.payload]=!0},setVoting:function(e,t){var n=t.payload,a=n.selectMin,r=n.selectMax;void 0!==a&&(e.voting.selectMin=a),void 0!==r&&(e.voting.selectMax=r)},setAdult:function(e,t){e.adult=t.payload},setSearch:function(e,t){e.search=t.payload}}}),le=ue.actions,fe=le.setLanguage,se=le.setVoting,ve=le.setAdult,de=le.setSearch,ge=Object(Q.a)((function(e){return e.movieFilter.language}),(function(e){return!!Object.keys(e).length})),me=Object(Q.a)(ae,(function(e){var t=new Set;return e.forEach((function(e){return t.add(e.original_language)})),Array.from(t)})),pe=Object(Q.a)((function(e){return e.movieFilter}),ae,ge,(function(e,t,n){var a=e.language,r=e.voting,c=e.adult,i=e.search;return t.filter((function(e){if(n&&!a[e.original_language])return!1;if(e.vote_average<r.selectMin||e.vote_average>r.selectMax)return!1;if(c&&!e.adult)return!1;if(i){var t,o=i.split(" ").filter((function(e){return e})),u=Object(q.a)(o);try{for(u.s();!(t=u.n()).done;){var l=t.value;if(-1===e.title.toLowerCase().indexOf(l.toLowerCase()))return!1}}catch(f){u.e(f)}finally{u.f()}}return!0}))})),he=function(e){return e.movieFilter.language},be=function(e){return e.movieFilter.voting},Oe=function(e){return e.movieFilter.adult},je=ue.reducer,Ee=n(216),xe=function(e){var t=e.options,n=e.checked,a=e.onOptionClick;return r.a.createElement(S,null,t.map((function(e){return r.a.createElement("div",{key:e},r.a.createElement(Ee.a,{onChange:function(){return a(e)},checked:n[e]},e))})))},we=n(69),ye=n(209),ke=function(e){var t,n=e.min,a=e.max,c=e.selectMin,i=e.selectMax,o=e.onChange,u=(t={},Object(we.a)(t,n,n),Object(we.a)(t,a,a),t);return r.a.createElement(ye.a,{min:n,max:a,range:!0,defaultValue:[c,i],step:.1,onChange:o,marks:u})},Me=n(214);function Ce(e){var t=e.swatch,n=e.title,a=e.rating,c=e.onClick;return r.a.createElement(W,null,r.a.createElement(B,{src:t,onClick:c}),r.a.createElement(F,null,n),r.a.createElement(Me.a,{allowHalf:!0,disabled:!0,defaultValue:a}))}var Se=n(210),_e=n(85),Ae=n(211);function Le(e){var t=e.swatch,n=e.title,a=e.vote_average,c=e.vote_count,i=e.overview,o=e.release_date,u=e.original_language,l=e.visible,f=e.onClose;return r.a.createElement(Se.a,{title:n,centered:!0,visible:l,footer:null,onCancel:f},r.a.createElement(C,null,r.a.createElement(I,{src:t}),r.a.createElement(S,null,r.a.createElement(C,null,r.a.createElement(A,null,o),r.a.createElement(L,null),r.a.createElement(A,null,"Language: ".concat(u))),r.a.createElement("div",null,r.a.createElement(_e.a,{placement:"right",title:"".concat(c," Voting")},r.a.createElement(Ae.a,{width:40,type:"circle",percent:10*a,strokeColor:Fe(a)}))),r.a.createElement(F,null,"Overview"),r.a.createElement(A,null,i))))}var Fe=function(e){var t=Math.round(e>5?1-(e-5)/5:e/5);return"rgb(".concat((e<5?[255,t,0]:e>5?[t,255,0]:[255,255,0]).join(","),")")},De=n(217),Ve=function(e){var t=e.checked,n=e.onChange;return r.a.createElement(De.a,{checked:t,onChange:n})},ze=n(212),We=function(e){var t=e.placeholder,n=e.onSearch;return r.a.createElement(ze.a.Search,{placeholder:t,onSearch:n,enterButton:!0})};function Be(){var e=Object(a.useRef)(null),t=Object(a.useState)(0),n=Object(o.a)(t,2),c=n[0],i=n[1],l=Object(a.useState)(null),f=Object(o.a)(l,2),s=f[0],v=f[1],d=Object(a.useState)(!0),g=Object(o.a)(d,2),m=g[0],p=g[1],h=Object(u.c)(pe),b=Object(u.c)(ce),O=Object(u.c)(re),j=Object(u.c)(ie),E=Object(u.b)(),x=function(){e.current&&i(e.current.offsetWidth)};Object(a.useEffect)((function(){var t=e.current,n=t.offsetWidth,a=t.offsetHeight;i(n),window.addEventListener("resize",x);var r=Math.ceil(Math.ceil(n/200)*Math.ceil(a/200/2)/20);return E(te({page:Array.from(Array(r),(function(e,t){return t+1}))})),function(){window.removeEventListener("resize",x)}}),[e.current]),Object(a.useEffect)((function(){p(b)}),[h]);var w=r.a.createElement(_,{key:0},r.a.createElement(C,null,r.a.createElement(H.a,{style:{marginRight:"20px"}}),"loading"));return r.a.createElement(z,{ref:e},r.a.createElement(P.a,{initialLoad:!1,pageStart:0,loadMore:function(){return E(te({page:O}))},useWindow:!1,hasMore:m,loader:j&&w},h.length?r.a.createElement(R.b,{dataSource:h,renderItem:function(e){return r.a.createElement(R.b.Item,null,r.a.createElement(Ce,Object.assign({},Ne(e),{onClick:function(){v(e)}})))},grid:{gutter:10,column:Ie(c)}}):r.a.createElement("div",null)),r.a.createElement(Le,Object.assign({visible:!!s},Ne(s||{}),{onClose:function(){return v(null)}})))}var Ie=function(e){return Math.max(Math.floor(e/200),1)},Ne=function(e){return Object(N.a)({},e,{rating:e.vote_average/2,swatch:"".concat("https://image.tmdb.org/t/p/w300_and_h450_bestv2").concat(e.poster_path)})},Re=n(207),He=function(e){var t=e.title,n=e.children,a=e.align,c=void 0===a?"vertical":a,i="vertical"===c?S:C;return r.a.createElement(i,null,t&&r.a.createElement(F,null,t),t&&"vertical"!==c&&r.a.createElement(L,null),n)};function Je(){var e=Object(u.b)(),t=Object(u.c)(be),n=Object(u.c)(me),a=Object(u.c)(he),c=Object(u.c)(Oe);return r.a.createElement(S,null,r.a.createElement(We,{placeholder:"Search Movie by Title",onSearch:function(t){e(function(e){return function(t){return t(de(e))}}(t))}}),r.a.createElement(Re.a,null),r.a.createElement(He,{title:"Language"},r.a.createElement(xe,{options:n,checked:a,onOptionClick:function(t){return e(function(e){return function(t){return t(fe(e))}}(t))}})),r.a.createElement(Re.a,null),r.a.createElement(He,{title:"Adult Only",align:"horizontal"},r.a.createElement(Ve,{checked:c,onChange:function(t){return e(function(e){return function(t){return t(ve(e))}}(t))}})),r.a.createElement(Re.a,null),r.a.createElement(He,{title:"Voting"},r.a.createElement(ke,Object.assign({},t,{onChange:function(t){var n=Object(o.a)(t,2),a=n[0],r=n[1];return e(function(e){var t=e.min,n=e.max;return function(e){return e(se({selectMin:t,selectMax:n}))}}({min:a,max:r}))}}))))}n(204);var Pe=function(){Object(u.b)();var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1];return r.a.createElement(D,null,r.a.createElement(V,null,"Movie Review App"),r.a.createElement(l.a,{style:{position:"absolute",right:"8px",top:"8px",fontSize:"32px",color:"#fff",cursor:"pointer"},onClick:function(){return c(!0)}}),r.a.createElement(Be,null),r.a.createElement(f.a,{title:"Movie Filter",placement:"right",closable:!0,onClose:function(){return c(!1)},visible:n,key:"right"},r.a.createElement(Je,null)))},Te=Object(K.a)({reducer:{movieData:oe,movieFilter:je}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,{store:Te},r.a.createElement(Pe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[132,1,2]]]);
//# sourceMappingURL=main.e68abbb0.chunk.js.map